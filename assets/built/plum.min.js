"use strict";var o=null,i={};function c(e){e=e||window.event;(e.code&&"Escape"===e.code||e.keyCode&&27===e.keyCode)&&t()}function a(e){t()}function n(e,t,n,r){e=document.querySelector(e);e.classList.add("is-active"),document.documentElement.classList.add("is-clipped"),o=e,i={closeByBackground:t,closeByButton:n,closeByEsc:r},t&&e.querySelector(".modal-background").addEventListener("click",a),n&&e.querySelector(".modal-close").addEventListener("click",a),r&&document.addEventListener("keydown",c)}function t(){document.documentElement.classList.remove("is-clipped"),o.classList.remove("is-active"),i.closeByBackground&&o.querySelector(".modal-background").removeEventListener("click",a),i.closeByButton&&o.querySelector(".modal-close").removeEventListener("click",a),i.closeByEsc&&document.removeEventListener("keydown",c)}function r(e){e=e||window.event;return e.code&&("Enter"===e.code||"NumpadEnter"===e.code)||e.keyCode&&13===e.keyCode}function s(e){e=e||window.event;return e.code&&"Escape"===e.code||e.keyCode&&27===e.keyCode}var e=document.querySelector("#menu-tags");function u(e){var t,n=document.querySelector("#site-search-input");if(n.classList.contains("is-active")){if(n.classList.remove("is-active"),!n.value.trim())return e.preventDefault(),void e.stopPropagation();n.classList.contains("bing")&&(t=n.getAttribute("data-site-url"),t=new URL(t).hostname,n.value+=" site:"+t)}else e.preventDefault(),e.stopPropagation(),n.classList.contains("bing")&&(e=n.value.split(" site:",1),n.value=0===e.length?"":e[0]),n.classList.add("is-active"),n.focus(),document.addEventListener("click",function e(t){n===t.target||n.contains(t.target)||(n.classList.remove("is-active"),document.removeEventListener("click",e))})}e&&e.addEventListener("click",function(e){n("#tags-modal",!0,!0,!0),e.preventDefault()});var d=document.querySelector("#site-search-button");d&&d.addEventListener("click",u),d&&d.addEventListener("keydown",function(e){r(e)&&u()});var l=document.querySelectorAll("input:not([type=hidden]):not(.hidden)");function h(e){e&&(document.documentElement.classList.add("user-color-scheme"),window.localStorage.setItem("userColorScheme","light"))}function f(e){e&&(document.documentElement.classList.remove("user-color-scheme"),window.localStorage.removeItem("userColorScheme"))}function v(e){document.documentElement.classList.add("is-dark-mode");var t=document.querySelector(".dark-button.sun");t.classList.add("disabled"),t.removeAttribute("tabindex"),t.setAttribute("aria-hidden","true");t=document.querySelector(".dark-button.moon");t.classList.remove("disabled"),t.setAttribute("tabindex","0"),t.removeAttribute("aria-hidden"),e&&(document.documentElement.classList.add("user-color-scheme"),window.localStorage.setItem("userColorScheme","dark"))}function m(e){document.documentElement.classList.remove("is-dark-mode");var t=document.querySelector(".dark-button.moon");t.classList.add("disabled"),t.removeAttribute("tabindex"),t.setAttribute("aria-hidden","true");t=document.querySelector(".dark-button.sun");t.classList.remove("disabled"),t.setAttribute("tabindex","0"),t.removeAttribute("aria-hidden"),e&&(document.documentElement.classList.remove("user-color-scheme"),window.localStorage.removeItem("userColorScheme"))}function g(){var e=window.matchMedia("(prefers-color-scheme: dark)").matches,t=!e;document.documentElement.classList.contains("is-dark-mode")?(t&&document.documentElement.removeAttribute("data-theme"),m(!0),h(e)):(t&&document.documentElement.setAttribute("data-theme","dark"),f(!0),v(t))}l&&Array.prototype.forEach.call(l,function(t){t.addEventListener("keydown",function(e){s(e)&&e.target===t&&(e.target.value="")}.bind(this))});var y=document.querySelectorAll(".dark-button"),p=0!==y.length;p&&Array.prototype.forEach.call(y,function(e){e.addEventListener("click",g),e.addEventListener("keydown",function(e){r(e)&&g()})});var k=window.matchMedia("(prefers-color-scheme: dark)");try{p&&k.addEventListener("change",function(e){e.matches&&(localStorage.getItem("userColorScheme")||v(!1))})}catch(e){p&&k.addListener(function(e){e.matches&&(localStorage.getItem("userColorScheme")||v(!1))})}k=window.matchMedia("(prefers-color-scheme: light)");try{p&&k.addEventListener("change",function(e){e.matches&&(localStorage.getItem("userColorScheme")||m(!1))})}catch(e){p&&k.addListener(function(e){e.matches&&(localStorage.getItem("userColorScheme")||m(!1))})}var b=document.querySelector("#img-modal .modal-content .img-wrap");b&&function(){function e(e){Array.prototype.forEach.call(e,function(e){e.addEventListener("click",function(e){b.style.background="center / contain no-repeat url("+e.target.src+")",n("#img-modal",!0,!0,!0)})})}var t=document.querySelectorAll(".kg-gallery-card img");e(t),e(document.querySelectorAll(".kg-image-card img"))}(),b&&b.addEventListener("click",function(){t()}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).Fuse=t()}(this,function(){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function e(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach(function(e){o(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function m(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e){return Array.isArray?Array.isArray(e):"[object Array]"===p(e)}var n=1/0;function d(e){return null==e?"":function(e){if("string"==typeof e)return e;var t=e+"";return"0"==t&&1/e==-n?"-0":t}(e)}function l(e){return"string"==typeof e}function h(e){return"number"==typeof e}function f(e){return!0===e||!1===e||s(t=e)&&null!==t&&"[object Boolean]"==p(e);var t}function s(e){return"object"===t(e)}function g(e){return null!=e}function y(e){return!e.trim().length}function p(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}var k="Extended search is not available",b=function(e){return"Missing ".concat(e," property in key")},L=function(e){return"Property 'weight' in key '".concat(e,"' must be a positive integer")},S=Object.prototype.hasOwnProperty,w=function(){function r(e){var t=this;v(this,r),this._keys=[],this._keyMap={};var n=0;e.forEach(function(e){e=E(e);n+=e.weight,t._keys.push(e),t._keyMap[e.id]=e,n+=e.weight}),this._keys.forEach(function(e){e.weight/=n})}return e(r,[{key:"get",value:function(e){return this._keyMap[e]}},{key:"keys",value:function(){return this._keys}},{key:"toJSON",value:function(){return JSON.stringify(this._keys)}}]),r}();function E(e){var t=null,n=null,r=null,o=1;if(l(e)||u(e))t=M(r=e),n=A(e);else{if(!S.call(e,"name"))throw new Error(b("name"));var i=e.name,r=i;if(S.call(e,"weight")&&(o=e.weight)<=0)throw new Error(L(i));t=M(i),n=A(i)}return{path:t,id:n,weight:o,src:r}}function M(e){return u(e)?e:e.split(".")}function A(e){return u(e)?e.join("."):e}var F=c({},{isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:function(e,t){return e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1}},{},{includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},{},{location:0,threshold:.6,distance:100},{},{useExtendedSearch:!1,getFn:function(e,t){var a=[],s=!1;return function e(t,n,r){if(n[r]){var o=t[n[r]];if(g(o))if(r===n.length-1&&(l(o)||h(o)||f(o)))a.push(d(o));else if(u(o)){s=!0;for(var i=0,c=o.length;i<c;i+=1)e(o[i],n,r+1)}else n.length&&e(o,n,r+1)}else a.push(t)}(e,l(t)?t.split("."):t,0),s?a:a[0]},ignoreLocation:!1,ignoreFieldNorm:!1}),x=/[^ ]+/g;var C=function(){function t(){var e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).getFn,e=void 0===e?F.getFn:e;v(this,t),this.norm=function(e){var n=0<arguments.length&&void 0!==e?e:3,r=new Map;return{get:function(e){var t=e.match(x).length;if(r.has(t))return r.get(t);e=parseFloat((1/Math.sqrt(t)).toFixed(n));return r.set(t,e),e},clear:function(){r.clear()}}}(3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}return e(t,[{key:"setSources",value:function(e){e=0<arguments.length&&void 0!==e?e:[];this.docs=e}},{key:"setIndexRecords",value:function(e){e=0<arguments.length&&void 0!==e?e:[];this.records=e}},{key:"setKeys",value:function(e){var n=this,e=0<arguments.length&&void 0!==e?e:[];this.keys=e,this._keysMap={},e.forEach(function(e,t){n._keysMap[e.id]=t})}},{key:"create",value:function(){var n=this;!this.isCreated&&this.docs.length&&(this.isCreated=!0,l(this.docs[0])?this.docs.forEach(function(e,t){n._addString(e,t)}):this.docs.forEach(function(e,t){n._addObject(e,t)}),this.norm.clear())}},{key:"add",value:function(e){var t=this.size();l(e)?this._addString(e,t):this._addObject(e,t)}},{key:"removeAt",value:function(e){this.records.splice(e,1);for(var t=e,n=this.size();t<n;t+=1)--this.records[t].i}},{key:"getValueForItemAtKeyId",value:function(e,t){return e[this._keysMap[t]]}},{key:"size",value:function(){return this.records.length}},{key:"_addString",value:function(e,t){g(e)&&!y(e)&&(e={v:e,i:t,n:this.norm.get(e)},this.records.push(e))}},{key:"_addObject",value:function(t,e){var c=this,a={i:e,$:{}};this.keys.forEach(function(e,o){var i=c.getFn(t,e.path);g(i)&&(u(i)?function(){for(var e=[],n=[{nestedArrIndex:-1,value:i}];n.length;){var t=n.pop(),r=t.nestedArrIndex,t=t.value;g(t)&&(l(t)&&!y(t)?(r={v:t,i:r,n:c.norm.get(t)},e.push(r)):u(t)&&t.forEach(function(e,t){n.push({nestedArrIndex:t,value:e})}))}a.$[o]=e}():y(i)||(e={v:i,n:c.norm.get(i)},a.$[o]=e))}),this.records.push(a)}},{key:"toJSON",value:function(){return{keys:this.keys,records:this.records}}}]),t}();function I(e,t){var n=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}).getFn,n=void 0===n?F.getFn:n,n=new C({getFn:n});return n.setKeys(e.map(E)),n.setSources(t),n.create(),n}function _(e,n){e=e.matches;n.matches=[],g(e)&&e.forEach(function(e){var t;g(e.indices)&&e.indices.length&&(t={indices:e.indices,value:e.value},e.key&&(t.key=e.key.src),-1<e.idx&&(t.refIndex=e.idx),n.matches.push(t))})}function O(e,t){t.score=e.score}function P(e,t){var n=1<arguments.length&&void 0!==t?t:{},r=n.errors,o=void 0===r?0:r,i=n.currentLocation,t=void 0===i?0:i,r=n.expectedLocation,i=void 0===r?0:r,r=n.distance,r=void 0===r?F.distance:r,n=n.ignoreLocation,n=void 0===n?F.ignoreLocation:n,e=o/e.length;if(n)return e;t=Math.abs(i-t);return r?e+t/r:t?1:e}var N=32;function j(e,t,n,r){var o=3<arguments.length&&void 0!==r?r:{},i=o.location,c=void 0===i?F.location:i,a=o.distance,s=void 0===a?F.distance:a,r=o.threshold,i=void 0===r?F.threshold:r,a=o.findAllMatches,u=void 0===a?F.findAllMatches:a,r=o.minMatchCharLength,a=void 0===r?F.minMatchCharLength:r,r=o.includeMatches,r=void 0===r?F.includeMatches:r,o=o.ignoreLocation,d=void 0===o?F.ignoreLocation:o;if(t.length>N)throw new Error("Pattern length exceeds max of ".concat(N,"."));for(var l,h=t.length,f=e.length,v=Math.max(0,Math.min(c,f)),m=i,g=v,y=1<a||r,p=y?Array(f):[];-1<(l=e.indexOf(t,g));){var k=P(t,{currentLocation:l,expectedLocation:v,distance:s,ignoreLocation:d}),m=Math.min(k,m),g=l+h;if(y)for(var b=0;b<h;)b+=p[l+b]=1}g=-1;for(var L=[],S=1,w=h+f,E=1<<h-1,M=0;M<h;M+=1){for(var A=0,x=w;A<x;)P(t,{errors:M,currentLocation:v+x,expectedLocation:v,distance:s,ignoreLocation:d})<=m?A=x:w=x,x=Math.floor((w-A)/2+A);w=x;var C=Math.max(1,v-x+1),I=u?f:Math.min(v+x,f)+h,_=Array(I+2);_[I+1]=(1<<M)-1;for(var O=I;C<=O;--O){var j=O-1,q=n[e.charAt(j)];if(y&&(p[j]=+!!q),_[O]=(_[O+1]<<1|1)&q,M&&(_[O]|=(L[O+1]|L[O])<<1|1|L[O+1]),_[O]&E&&(S=P(t,{errors:M,currentLocation:j,expectedLocation:v,distance:s,ignoreLocation:d}))<=m){if(m=S,(g=j)<=v)break;C=Math.max(1,2*v-g)}}if(m<P(t,{errors:M+1,currentLocation:v,expectedLocation:v,distance:s,ignoreLocation:d}))break;L=_}i={isMatch:0<=g,score:Math.max(.001,S)};return y&&((a=function(e,t){for(var n=0<arguments.length&&void 0!==e?e:[],r=1<arguments.length&&void 0!==t?t:F.minMatchCharLength,o=[],i=-1,c=0,a=n.length;c<a;c+=1){var s=n[c];s&&-1===i?i=c:s||-1===i||(r<=(s=c-1)-i+1&&o.push([i,s]),i=-1)}return n[c-1]&&r<=c-i&&o.push([i,c-1]),o}(p,a)).length?r&&(i.indices=a):i.isMatch=!1),i}var q=function(){function f(e){var n=this,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=t.location,o=void 0===r?F.location:r,i=t.threshold,c=void 0===i?F.threshold:i,a=t.distance,s=void 0===a?F.distance:a,u=t.includeMatches,r=void 0===u?F.includeMatches:u,i=t.findAllMatches,a=void 0===i?F.findAllMatches:i,u=t.minMatchCharLength,i=void 0===u?F.minMatchCharLength:u,u=t.isCaseSensitive,u=void 0===u?F.isCaseSensitive:u,t=t.ignoreLocation,t=void 0===t?F.ignoreLocation:t;if(v(this,f),this.options={location:o,threshold:c,distance:s,includeMatches:r,findAllMatches:a,minMatchCharLength:i,isCaseSensitive:u,ignoreLocation:t},this.pattern=u?e:e.toLowerCase(),this.chunks=[],this.pattern.length){var d=function(e,t){n.chunks.push({pattern:e,alphabet:function(e){for(var t={},n=0,r=e.length;n<r;n+=1){var o=e.charAt(n);t[o]=(t[o]||0)|1<<r-n-1}return t}(e),startIndex:t})},u=this.pattern.length;if(N<u){for(var l=0,e=u%N,h=u-e;l<h;)d(this.pattern.substr(l,N),l),l+=N;e&&(u=u-N,d(this.pattern.substr(u),u))}else d(this.pattern,0)}}return e(f,[{key:"searchIn",value:function(r){var e=this.options,t=e.isCaseSensitive,o=e.includeMatches;if(t||(r=r.toLowerCase()),this.pattern===r){var n={isMatch:!0,score:0};return o&&(n.indices=[[0,r.length-1]]),n}var n=this.options,i=n.location,c=n.distance,a=n.threshold,s=n.findAllMatches,u=n.minMatchCharLength,d=n.ignoreLocation,l=[],h=0,f=!1;this.chunks.forEach(function(e){var t=e.pattern,n=e.alphabet,e=e.startIndex,t=j(r,t,n,{location:i+e,distance:c,threshold:a,findAllMatches:s,minMatchCharLength:u,includeMatches:o,ignoreLocation:d}),n=t.isMatch,e=t.score,t=t.indices;n&&(f=!0),h+=e,n&&t&&(l=[].concat(m(l),m(t)))});n={isMatch:f,score:f?h/this.chunks.length:1};return f&&o&&(n.indices=l),n}}]),f}(),T=[];function B(e,t){for(var n=0,r=T.length;n<r;n+=1){var o=T[n];if(o.condition(e,t))return new o(e,t)}return new q(e,t)}function D(e){return!(!e[R]&&!e[J])}function $(t){return o({},R,Object.keys(t).map(function(e){return o({},e,t[e])}))}var R="$and",J="$or",K="$path",U="$val";var z=function(){function r(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length?arguments[2]:void 0;if(v(this,r),this.options=c({},F,{},t),this.options.useExtendedSearch)throw new Error(k);this._keyStore=new w(this.options.keys),this.setCollection(e,n)}return e(r,[{key:"setCollection",value:function(e,t){if(this._docs=e,t&&!(t instanceof C))throw new Error("Incorrect 'index' type");this._myIndex=t||I(this.options.keys,this._docs,{getFn:this.options.getFn})}},{key:"add",value:function(e){g(e)&&(this._docs.push(e),this._myIndex.add(e))}},{key:"remove",value:function(e){for(var t=0<arguments.length&&void 0!==e?e:function(){return!1},n=[],r=0,o=this._docs.length;r<o;r+=1){var i=this._docs[r];t(i,r)&&(this.removeAt(r),--r,n.push(i))}return n}},{key:"removeAt",value:function(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}},{key:"getIndex",value:function(){return this._myIndex}},{key:"search",value:function(e,t){var o,n=(1<arguments.length&&void 0!==t?t:{}).limit,r=void 0===n?-1:n,i=this.options,c=i.includeMatches,a=i.includeScore,s=i.shouldSort,t=i.sortFn,n=i.ignoreFieldNorm,i=l(e)?l(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return e=i,n=(n={ignoreFieldNorm:n}).ignoreFieldNorm,o=void 0===n?F.ignoreFieldNorm:n,e.forEach(function(e){var r=1;e.matches.forEach(function(e){var t=e.key,n=e.norm,e=e.score,t=t?t.weight:null;r*=Math.pow(0===e&&t?Number.EPSILON:e,(t||1)*(o?1:n))}),e.score=r}),s&&i.sort(t),h(r)&&-1<r&&(i=i.slice(0,r)),function(e,r){var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n=t.includeMatches,n=void 0===n?F.includeMatches:n,t=t.includeScore,t=void 0===t?F.includeScore:t,o=[];n&&o.push(_);t&&o.push(O);return e.map(function(t){var e=t.idx,n={item:r[e],refIndex:e};return o.length&&o.forEach(function(e){e(t,n)}),n})}(i,this._docs,{includeMatches:c,includeScore:a})}},{key:"_searchStringList",value:function(e){var c=B(e,this.options),e=this._myIndex.records,a=[];return e.forEach(function(e){var t,n,r=e.v,o=e.i,i=e.n;g(r)&&(t=(n=c.searchIn(r)).isMatch,e=n.score,n=n.indices,t&&a.push({item:r,idx:o,matches:[{score:e,value:r,norm:i,indices:n}]}))}),a}},{key:"_searchLogical",value:function(){throw new Error("Logical search is not available")}},{key:"_searchObjectList",value:function(e){var o=this,i=B(e,this.options),e=this._myIndex,t=e.keys,e=e.records,c=[];return e.forEach(function(e){var n,r=e.$,e=e.i;g(r)&&(n=[],t.forEach(function(e,t){n.push.apply(n,m(o._findMatches({key:e,value:r[t],searcher:i})))}),n.length&&c.push({idx:e,item:r,matches:n}))}),c}},{key:"_findMatches",value:function(e){var c=e.key,t=e.value,a=e.searcher;if(!g(t))return[];var n,r,o,s=[];return u(t)?t.forEach(function(e){var t,n,r=e.v,o=e.i,i=e.n;g(r)&&(t=(n=a.searchIn(r)).isMatch,e=n.score,n=n.indices,t&&s.push({score:e,key:c,value:r,idx:o,norm:i,indices:n}))}):(n=t.v,r=t.n,e=(o=a.searchIn(n)).isMatch,t=o.score,o=o.indices,e&&s.push({score:t,key:c,value:n,norm:r,indices:o})),s}}]),r}();return z.version="6.4.1",z.createIndex=I,z.parseIndex=function(e){var t=void 0===(n=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).getFn)?F.getFn:n,n=e.keys,e=e.records;return(t=new C({getFn:t})).setKeys(n),t.setIndexRecords(e),t},z.config=F,z.parseQuery=function(e,c){var a=void 0===(t=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}).auto)||t,t=function t(n){var e=Object.keys(n),r=!!n[K];if(!r&&1<e.length&&!D(n))return t($(n));if(!u(o=n)&&s(o)&&!D(o)){var o=r?n[K]:e[0],r=r?n[U]:n[o];if(!l(r))throw new Error("Invalid value for key ".concat(o));o={keyId:A(o),pattern:r};return a&&(o.searcher=B(r,c)),o}var i={children:[],operator:e[0]};return e.forEach(function(e){e=n[e];u(e)&&e.forEach(function(e){i.children.push(t(e))})}),i};return D(e)||(e=$(e)),t(e)},z});var L={threshold:0,ignoreLocation:!0,minMatchCharLength:2,keys:[{name:"title",weight:10},{name:"tags",weight:9},{name:"authors",weight:8},{name:"custom_excerpt",weight:7},"plaintext"]};function S(){var e=document.querySelector("#search-modal .control.search"),t=document.querySelector("#search-modal .control.search input.search");e.classList.remove("loading"),e.classList.add("loaded"),t.removeAttribute("disabled"),t.setAttribute("placeholder",""),t.focus()}function w(e){var t=document.querySelector("#search-modal .control.search"),n=document.querySelector("#search-modal .control.search input.search"),r=document.querySelector("#search-modal .tips.error");t.classList.remove("loading"),t.classList.add("loaded"),n.setAttribute("placeholder",""),r.innerText=e||r.getAttribute("data-error-tips"),r.classList.add("is-active")}var E=null;function M(e){window.sessionStorage.setItem("searchData",JSON.stringify(e))}function A(){var e=window.sessionStorage.getItem("searchData");return!!e&&(E=new Fuse(JSON.parse(e),L),S(),!0)}function x(){var e,i;"undefined"!=typeof searchContentAPIKey&&searchContentAPIKey?(e=("undefined"!=typeof ghostAdminURL&&ghostAdminURL?ghostAdminURL:"")+"/ghost/api/v2/content/posts/?key="+searchContentAPIKey+"&limit=all&formats=plaintext&include=authors,tags&fields=url,title,custom_excerpt,plaintext",(i=new XMLHttpRequest).open("GET",e,!0),i.onload=function(e){if(i.status<200||400<=i.status){for(var t="Can't load search data, HTTP response status code: "+i.status+"\n",n=JSON.parse(i.response).errors,r=0;r<n.length;r++)t+="  Error type: "+n[r].errorType+", Message: "+n[r].message+"\n";return w(0<n.length?n[0].message:""),void console.error(t)}var o=JSON.parse(i.response).posts;if(!o.length)return w(""),void console.error("No search data.");o.forEach(function(e){var t,n=[];e.authors.forEach(function(e){n.push(e.name)}),delete e.authors,e.authors=n,e.tags&&(t=[],e.tags.forEach(function(e){t.push(e.name)}),delete e.tags,e.tags=t)}),E=new Fuse(o,L),S(),M(o),3145728<=e.loaded&&console.warn("The index data of posts is larger than 3MB, size: ",e.loaded,"bytes.")},i.onerror=function(e){console.error("There was an error when loading search data,",e.loaded,"bytes transferred.")},i.send()):w(document.querySelector("#search-modal .control.search").getAttribute("data-no-api-key-tips"))}function C(){A()||x()}function I(){n("#search-modal",!1,!0,!1),E?document.querySelector("#search-modal .control.search input.search").focus():C()}var _=document.querySelector("#local-search");function O(e){var r,t=document.querySelector("#search-modal .results");e.length?(r=document.createElement("ul"),e.forEach(function(e){var t=document.createElement("li");t.classList.add("item");var n=document.createElement("a");n.href=e.url,n.classList.add("title"),n.innerText=e.title,t.appendChild(n),r.appendChild(t)}),t.innerText="",(e=document.querySelector("#search-modal .results > ul"))?t.replaceChild(r,e):t.appendChild(r)):t.innerText=t.getAttribute("data-no-result-tips")}_&&_.addEventListener("click",I),_&&_.addEventListener("keydown",function(e){r(e)&&I()});var j=null;document.querySelector("#search-modal .control.search .input.search").addEventListener("input",function(o){clearTimeout(j),j=setTimeout(function(){var t,n,r=[],e=o.target.value?o.target.value.split(/\s+/):[];e.length&&(t=""===e[e.length-1]?e.length-1:e.length)&&(n={},e.forEach(function(e){e.length&&E.search(e).forEach(function(e){n[e.item.title]?n[e.item.title]+=1:n[e.item.title]=1,n[e.item.title]>=t&&r.push(e.item)})})),O(r)}.bind(this),100)});